{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"J:\\\\doc\\\\ch6\\\\next-nodejs-auth-main\\\\ClientFinal-main\\\\frontend\\\\pages\\\\admin.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Head from 'next/head';\nimport styles from '../styles/admin.module.css'; //import useSWR, { mutate } from 'swr'\n\nimport Navbar from \"../components/navbar\";\nimport withAuth from \"../components/withAuth\";\nimport Link from 'next/link';\nconst URL = \"http://localhost/api/game_shops\";\nconst URL2 = \"http://localhost/api/income\";\n\nconst fetcher = url => axios.get(url).then(res => res.data);\n\nconst SWR1 = () => {\n  const {\n    0: game_shops,\n    1: setgame_shops\n  } = useState({\n    list: [{\n      id: 1,\n      name: \"table\",\n      price: 999,\n      date_sell: \"Ems\",\n      sell_buy: 99\n    }]\n  });\n  const {\n    0: game_shop,\n    1: setgame_shop\n  } = useState({});\n  const {\n    0: id,\n    1: setId\n  } = useState(0);\n  const {\n    0: name,\n    1: setname\n  } = useState('');\n  const {\n    0: price,\n    1: setPrice\n  } = useState(0);\n  const {\n    0: date_sell,\n    1: setdate_sell\n  } = useState(0);\n  const {\n    0: sell_buy,\n    1: setsell_buy\n  } = useState(0);\n  const {\n    0: imageurl,\n    1: setimageurl\n  } = useState('');\n  const {\n    0: income,\n    1: setIncome\n  } = useState(0);\n  useEffect(() => {\n    getgame_shops();\n    getIncome();\n    profileUser();\n  }, []);\n\n  const profileUser = async () => {\n    try {\n      // console.log('token: ', token)\n      const users = await axios.get(`${config.URL}/profile`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }); // console.log('user: ', users.data)\n\n      setUser(users.data);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const getgame_shops = async () => {\n    let game_shops = await axios.get(URL);\n    setgame_shops(game_shops.data); //console.log('game_shop:', game_shops.data)\n  };\n\n  const getIncome = async () => {\n    let income = await axios.get(URL2);\n    setIncome(income.data); //console.log('income:', income.data)\n  };\n\n  const getgame_shop = async id => {\n    let game_shop = await axios.get(`${URL}/${id}`);\n    console.log('game_shop id: ', game_shop.data);\n    setgame_shop({\n      id: game_shop.data.id,\n      name: game_shop.data.name,\n      price: game_shop.data.price,\n      date_sell: game_shop.data.date_sell,\n      sell_buy: game_shop.data.sell_buy,\n      imageurl: game_shop.data.imageurl\n    });\n  };\n\n  const printgame_shops = () => {\n    if (game_shops && game_shops.length) return game_shops.map((game_shop, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n      className: styles.listItem,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.box,\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          children: [\"Id:\", game_shop ? game_shop.id : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: game_shop.imageurl,\n          width: \"100\",\n          height: \"100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: [\"name:\", game_shop ? game_shop.name : '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), \"Price:\", game_shop ? game_shop.price : 0, /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: [\"date_sell:\", game_shop ? game_shop.date_sell : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: [\"sell_buy:\", game_shop ? game_shop.sell_buy : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.btndelete,\n          onClick: () => deletegame_shop(game_shop.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.btnget,\n          onClick: () => getgame_shop(game_shop.id),\n          children: \"Get\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.btnup,\n          onClick: () => updategame_shop(game_shop.id),\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 22\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this));else return /*#__PURE__*/_jsxDEV(\"li\", {\n      children: \" \\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32 \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 20\n    }, this);\n  };\n\n  const printIncome = () => {\n    return income;\n  };\n\n  const addgame_shop = async (name, price, date_sell, sell_buy, imageurl) => {\n    let game_shops = await axios.post(URL, {\n      name,\n      price,\n      date_sell,\n      sell_buy,\n      imageurl\n    });\n    setgame_shops(game_shops.data);\n  };\n\n  const deletegame_shop = async id => {\n    const result = await axios.delete(`${URL}/${id}`);\n    console.log(result.data);\n    getgame_shops();\n  };\n\n  const updategame_shop = async id => {\n    const result = await axios.put(`${URL}/${id}`, {\n      id,\n      name,\n      price,\n      date_sell,\n      sell_buy,\n      imageurl\n    }); //console.log('student id update: ', result.data)\n\n    getgame_shops();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.list,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"preconnect\",\n        href: \"https://fonts.gstatic.com\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        href: \"https://fonts.googleapis.com/css2?family=Crimson+Text&display=swap\",\n        rel: \"stylesheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Income:\", printIncome()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"preconnect\",\n        href: \"https://fonts.gstatic.com\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        href: \"https://fonts.googleapis.com/css2?family=Itim&display=swap\",\n        rel: \"stylesheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Littelpig game_shop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"preconnect\",\n        href: \"https://fonts.gstatic.com\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        href: \"https://fonts.googleapis.com/css2?family=Itim&display=swap\",\n        rel: \"stylesheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: styles.list,\n      children: printgame_shops()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: styles.btnadd,\n      children: [\"selected order: \", game_shop.name, \" \", game_shop.price, \"  \", game_shop.date_sell, \" \", game_shop.sell_buy, \" \", game_shop.imageurl, /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), \"name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setname(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 18\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 82\n      }, this), \"price:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        onChange: e => setPrice(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 82\n      }, this), \"date_sell:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setdate_sell(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 88\n      }, this), \"sell_buy:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setsell_buy(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 18\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 86\n      }, this), \"imageurl:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"Linkd\",\n        onChange: e => setimageurl(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 18\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 87\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.btnadd,\n        onClick: () => addgame_shop(name, price, date_sell, sell_buy, imageurl),\n        children: \"Add new order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 13\n  }, this);\n};\n\nexport default withAuth(SWR1);\nexport function getServerSideProps({\n  req,\n  res\n}) {\n  return {\n    props: {\n      token: req.cookies.token || \"\"\n    }\n  };\n}","map":{"version":3,"sources":["J:/doc/ch6/next-nodejs-auth-main/ClientFinal-main/frontend/pages/admin.js"],"names":["React","useState","useEffect","axios","Head","styles","Navbar","withAuth","Link","URL","URL2","fetcher","url","get","then","res","data","SWR1","game_shops","setgame_shops","list","id","name","price","date_sell","sell_buy","game_shop","setgame_shop","setId","setname","setPrice","setdate_sell","setsell_buy","imageurl","setimageurl","income","setIncome","getgame_shops","getIncome","profileUser","users","config","headers","Authorization","token","setUser","e","console","log","getgame_shop","printgame_shops","length","map","index","listItem","box","btndelete","deletegame_shop","btnget","btnup","updategame_shop","printIncome","addgame_shop","post","result","delete","put","container","btnadd","target","value","getServerSideProps","req","props","cookies"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport Head from 'next/head'\nimport styles from '../styles/admin.module.css'\n//import useSWR, { mutate } from 'swr'\nimport Navbar from \"../components/navbar\";\nimport withAuth from \"../components/withAuth\";\nimport Link from 'next/link'\n\n\nconst URL = \"http://localhost/api/game_shops\";\nconst URL2 = \"http://localhost/api/income\";\n\n\nconst fetcher = url => axios.get(url).then(res => res.data)\nconst SWR1 = () => {\n    const [game_shops, setgame_shops] = useState({ list: [{ id: 1, name: \"table\", price:999, date_sell:\"Ems\"  ,sell_buy:99 },] })\n    const [game_shop, setgame_shop] = useState({})\n    const [id, setId] = useState(0)\n    const [name, setname] = useState('')\n    const [price, setPrice] = useState(0)\n    const [date_sell,setdate_sell] = useState(0)\n    const [sell_buy,setsell_buy] = useState(0)\n    const [imageurl,setimageurl] = useState('')\n    const [income, setIncome] = useState(0)\n\n\n\n    useEffect(() => {\n        getgame_shops();\n        getIncome();\n        profileUser();\n      }, []);\n\n    const profileUser = async () => {\n        try {\n          // console.log('token: ', token)\n          const users = await axios.get(`${config.URL}/profile`, {\n            headers: { Authorization: `Bearer ${token}` },\n          });\n          // console.log('user: ', users.data)\n          setUser(users.data);\n        } catch (e) {\n          console.log(e);\n        }\n      };\n    \n    const getgame_shops = async () => {\n        let game_shops = await axios.get(URL)\n        setgame_shops(game_shops.data)\n        //console.log('game_shop:', game_shops.data)\n    }\n    const getIncome = async () => {\n        let income = await axios.get(URL2)\n        setIncome(income.data)\n        //console.log('income:', income.data)\n    }\n\n    const getgame_shop = async (id) => {\n        let game_shop = await axios.get(`${URL}/${id}`)\n        console.log('game_shop id: ', game_shop.data)\n        setgame_shop({ id: game_shop.data.id, name: game_shop.data.name, price: game_shop.data.price,  date_sell: game_shop.data.date_sell, sell_buy: game_shop.data.sell_buy, imageurl: game_shop.data.imageurl})\n    }\n\n\n\n    const printgame_shops = () => {\n        if (game_shops && game_shops.length)\n            return game_shops.map((game_shop, index) =>\n                <li className={styles.listItem} key={index}>\n                     <div className={styles.box}>\n                    <h6>Id:{(game_shop) ? game_shop.id : 0}</h6>\n                    <img src={game_shop.imageurl} width=\"100\" height=\"100\"></img>\n                    <h6>name:{(game_shop) ? game_shop.name : '-'}</h6>\n                    Price:{(game_shop) ? game_shop.price : 0}\n                    <h6>date_sell:{(game_shop) ? game_shop.date_sell : 0}</h6>\n                    <h6>sell_buy:{(game_shop) ? game_shop.sell_buy : 0}</h6>\n                    <button className={styles.btndelete} onClick={() => deletegame_shop(game_shop.id)} >Delete</button>\n                    <button className={styles.btnget} onClick={() => getgame_shop(game_shop.id)}>Get</button>\n                    <button className={styles.btnup} onClick={() => updategame_shop(game_shop.id)}>Update</button>\n\n                    </div>\n                </li>\n            )\n        else\n            return <li> ไม่มีสินค้า </li>\n    }\n\n    const printIncome = () => {\n        return income\n    }\n\n\n    const addgame_shop = async ( name, price, date_sell, sell_buy,imageurl) => {\n        let game_shops = await axios.post(URL, {  name, price, date_sell, sell_buy, imageurl })\n        setgame_shops(game_shops.data)\n        \n    }\n\n\n    const deletegame_shop = async (id) => {\n        const result = await axios.delete(`${URL}/${id}`)\n        console.log(result.data)\n        getgame_shops()\n    }\n\n    const updategame_shop = async (id) => {\n        const result = await axios.put(`${URL}/${id}`, { id, name, price, date_sell, sell_buy, imageurl })\n        //console.log('student id update: ', result.data)\n        getgame_shops()\n    }\n\n\n\n    return (<div className={styles.container} >\n         \n          <Navbar />\n          <br></br>\n          <br></br>\n          <div className={styles.list} >\n        <h1>Admin</h1>\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\"/>\n        <link href=\"https://fonts.googleapis.com/css2?family=Crimson+Text&display=swap\" rel=\"stylesheet\"></link>\n        <h2>Income:{printIncome()}</h2>\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\"/>\n<link href=\"https://fonts.googleapis.com/css2?family=Itim&display=swap\" rel=\"stylesheet\"></link>\n        <h2>Littelpig game_shop</h2>\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\"/>\n<link href=\"https://fonts.googleapis.com/css2?family=Itim&display=swap\" rel=\"stylesheet\"></link>\n</div>\n\n        <ul className={styles.list}  >{printgame_shops()}</ul>\n        <ul className={styles.btnadd} >\n        selected order: {game_shop.name} {game_shop.price}  {game_shop.date_sell} {game_shop.sell_buy} {game_shop.imageurl}\n        <h2>Add Order</h2>\n        \n            name:<input type=\"text\" onChange={(e) => setname(e.target.value)} /> <br />\n        price:<input type=\"number\" onChange={(e) => setPrice(e.target.value)} /> <br />\n        date_sell:<input type=\"text\" onChange={(e) => setdate_sell(e.target.value)} /> <br />\n        sell_buy:<input type=\"text\" onChange={(e) => setsell_buy(e.target.value)} /> <br />\n        imageurl:<input type=\"Linkd\" onChange={(e) => setimageurl(e.target.value)} /> <br />\n            <button className={styles.btnadd} onClick={() => addgame_shop(name,  price, date_sell, sell_buy, imageurl)}>Add new order</button>\n            \n            \n        </ul>          \n    </div>\n    \n    )\n}\n\nexport default withAuth(SWR1);\n\nexport function getServerSideProps({ req, res }) {\n    return { props: { token: req.cookies.token || \"\" } };\n  }\n"]},"metadata":{},"sourceType":"module"}